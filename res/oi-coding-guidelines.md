# OI Coding Guidelines

## 前言

这份简单的指南主要是关于以下两个方面：

1.  OI 赛场上 C++ 语言的一些常用技巧和注意事项。
2.  NOI Linux (Ubuntu) 中常用的工具和习惯。

由于大多是我个人的感受，所以后面的内容大家简单看看就好。

## 第一部分：C++ 语言

CCF 已经发了公告[^1]，将要在不久后就会逐步取消 Pascal 和 C 语言。对于使用 Pascal 的同学，需要尽快转到 C++ 上面来，而对于使用 C 语言的同学，我觉得这是不存在的，因为 OI 中鲜有使用一些 C++ 高级特性的场景。

[^1]: http://www.noi.cn/about/rules/744-ccfnoi 

这里我将会写一点一般 OIer 容易忽视的一些 C++ 语法和技巧，希望对你们有用。

### 代码一般结构

我看过的大部分代码都是下面这个结构：

```c++
// 开头注释，或是一些奇怪的东西

#include <...>
#include <...>
#include <...>
// #include <bits/stdc++.h>: someone may love it.

// 花式宏定义
// 一些简单的函数

struct XXPoint {
	// 某某 struct
};

struct XXTree {
    // 某某数据结构
};

void aaa() {
    // ...
}

inline int bbb() {
    // ...
}

// ...

int main() {
    // 开文件
  	init();
    work();
    return 0;
}
```

至于到底该怎么写，这都是个人的习惯和爱好。这里只是建议每个函数不宜过长，最好不要有超过 20 行的函数，因为这种很长的函数不利于代码调试。

### 空格与空行

通常，很多表达式的中间我们都会打上一个空格，用来凸显运算符的位置。一个很长的表达式没有空间，都是比较难以阅读的。如下面这个表达式：

```c++
x1=-b+sqrt(b*b-4*a*c)/2/a;x2=-b-sqrt(b*b-4*a*c)/(2*a);// 解方程
```

普遍会写成这样：

```c++
x1 = -b + sqrt(b * b - 4 * a * c) / 2 / a;
x2 = -b - sqrt(b * b - 4 * a * c) / (2 * a);  // 注释与代码之间通常也有 1-2 个的空格
```

相比之下，下面这个在代码中就清晰很多。当然，如果你觉得像 `4 * a * c` 这种可以写的和数学公式 $4ac$ 一样紧凑，`4*a*c` 也是可以接受的。打这种空格并不需要花费什么时间，只要多试几次，自然就熟悉了。我们的目的在于希望通过这种习惯性的空格来减少自己检查错误的时间。

空行通常用于分隔两段作用有明显差异的代码块，如两个函数之间、同一个函数的不同步骤之间。这个时候写点注释也是可以的，但是上了考场大家普遍不会写注释......

下面这段代码我是随便从 UOJ 上截的一段改的，大家体会一下就好。

```
sieve();

for (int i = 1; i <= h; i++)
    if (!(a[1] % pri[i])) p[++tot] = pri[i];

for (int i = 1; i <= n; i++) {
    i64 t = gcd(a[1], a[i]);
    
    if (t == 1) {
    	printf("-1 ");
    	continue;
    }

    bool flag = 1;
    for (int j = 1; j <= tot && 1LL * p[j] * p[j] <= t; j++)
        if (!(t % p[j])){
            printf("%lld ", t / p[j]);
            flag = 0;
            break;
        }

    if (flag)
    	printf("1 ");  // t为质数
}
```

如果您是一个热衷于缩行的青少年，上面的话您可以无视......

### dsd