#### C. Painting

**题意**　给出一个长度为 $n$ 的目标序列，上面一共有 $m$ 种颜色。现在给你一个未染色的序列，要你将 $m$ 中颜色各使用一遍，每次可以将一段区间内都染上同一种颜色，使其最后变为目标序列。问 $m$ 次染色所指定的区间长度总和的最大值为多少。数据保证有解。$n \leqslant 10^5$，$m \leqslant 5000$。

**题解**　首先计算出每种颜色最左边和最右边的位置，构成区间 $[L_i,\,R_i]$。染第 $i$ 种颜色时指定的区间至少要包含 $[L_i,\,R_i]$。由于保证有解，所以这些区间之间只有相离和包含的关系，没有相交的关系。因此这些区间按照包含关系可以构成一棵树。

由于每种颜色只能染一次，所以一定是先染父亲再染儿子。区间相邻的兄弟之间由于可以任意调整染色的顺序，因而导致会有不同的答案。现在只需要考虑：对于至多 $m$ 个相邻的区间，求出最优染色方案中区间长度总和的最大值。

不难猜想一个贪心的思路：每次都是从两端选取一个区间来进行染色。假设现在依次有三个长度为 $a$、$b$、$c$ 的区间，不妨令 $a \leqslant c$，那么选择先染 $a$ 的收益为：
$$
a + b + c + b + c + \max\{b,\,c\}
$$
先染 $b$ 的收益为：
$$
a + b + c + a + c
$$
因为 $a \leqslant \max\{b,\,c\}$，所以先染 $a$ 的收益更多，也就是先染边上的区间更优。如果直接按照取两端长度最短区间来染色的贪心策略，可能遇到下面这种情况：

<center>
```
3 2 1 3
```
</center>

此时两端的区间长度一样，而选择不同会导致不同的答案。最稳妥的方案就是使用 DP：设 $f(i,\,j)​$ 表示左端点为 $i​$、右端点为 $j​$ 的最优值。转移显然。时间复杂度 $O(n + m^2)​$。

#### K. Shuffle

**题意**　给出 $2^n$ 张牌，每次洗牌时将牌分为大小相等的两半，先分治下去洗这两小堆，最后将前一堆放到后一堆后面。问洗 $K$ 次牌后牌的顺序。$n \leqslant 20$，$K \leqslant 10^9$。

**题意**　观察后发现这个洗牌实际上就是把牌的顺序翻转了一下，所以根据 $K$ 的奇偶性来输出即可。时间复杂度 $\Theta(2^n)$.