#### A. Centroid Tree

**题意**　有两种生成随机树的算法：

1. 每次等概率选择一对不连通的点，将其加入的树中。
2. 首先使用算法 1 生成一棵树，然后对其做点分治，将相邻两级的重心之间连边。

现在给出一棵树，要你判断这棵树应该是哪种算法生成的。树上节点数 $n$ 满足 $60 \leqslant n \leqslant 1000$。

**题解**　第一种算法实在不好判断，因此考虑第二种算法生成的树的特点。

如果给出树根，不难发现只需要对这棵树再次进行点分治就可以判断：如果点分治过程中的重心与当前子树的根不相同，就说明不是算法 2 生成的。

由于数据给出的是无根树，所以需要先求出树的所有重心，依次假设为根来判断。因为重心最多两个，所以时间复杂度为 $O(n \log n)$。

#### C. Even and Odd

**题意**　对于一张 $n$ 个点 $m$ 条边的无向连通简单图，如果两个节点 $u$、$v$ 间所有简单路径的边数均为奇数，则称 $(u,\,v)$ 为奇对；如果均为偶数，则称为偶对。求出图上奇对和偶对的个数。$n,\,m \leqslant 2 \times 10^5$。

**题解**　考虑将图进行点双缩点：对于一个点双，如果其中存在奇环，不难发现这个点双内任意两个点之间既有奇数条边的简单路径，也有偶数条边的简单路径。所以合法的点对之间不能经过这样的点双。

此外，对于任意偶环，去掉其中任意一条非割边，剩下的点双中也不会出现奇环。所以，对于每个点双，如果其中有奇环，就将其中的边全部删除。否则就只需留下这个点双的一棵生成树上的所有边。此外保留图上的所有割边。最后图会变成一棵树，再做树型 DP 即可。时间复杂度为 $\Theta(n + m)$。

#### D. Great Again

**题意**　给定一个仅包含 -1、0 和 1 的长度为 $n$ 的序列，要将其划分为若干个长度在 $[L,\,R]$ 之间的区间。对于每个区间，如果总和为正数，则权值为 1；如果为负数，则权值为 -1；否则为 0。求最大能够得到的权值和。$n \leqslant 3 \times 10^5$。

**题解**　计算序列的前缀和，然后按照前缀和的相对大小分为三类，贡献的差值分别为 -1、0 和 1。使用值域线段树来维护这三类 DP 值的最大值。由于序列元素的绝对值不超过 1，所以值域大小只有 $n$，因此时间复杂度为 $O(n \log n)$。