<br /><center class="subtitle">Fudan ICPC Summer Training Camp 2019</center>

# 牛客网第七场训练报告

<br />
<center>[Fudan U2] 刘明君、孙亮亮、薛振梁</center>
<center>2019 年 8 月 8 日</center>
<br />

### 概况

比赛中通过 8 题，赛后补 3 题，总共通过 11 题。

### 比赛过程

<pre class="replay">
|0........|30.......|60.......|90.......|120......|150......|180......|210......|240......|270...... (min)
  D             E                  C                              !x x   F                         i [lmj]
 J                                 C                                A                              i [sll]
                   xB    xa                               H         A                              i [xzl]
*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^*^^^^^^^^^
 x   Wrong Answer / Presentation Error              !   Runtime Error
 +   Time Limit Exceeded                            =   Memory Limit Exceeded
A-N  Accepted                                      a-n  可做但未通过 / 弃题
</pre>

### 总结

**刘明君：**I 题又是想了一个特别复杂的做法，导致式子很麻烦，写不出来，在写之前要平衡找一个优秀做法和直接写掉的时间代价。

**孙亮亮：**本场状态不是很好，比赛前一定要好好休息 qwq

**薛振梁：**这一场主要有两个问题。一是 A 题大暴力题不敢写，结果还想了几个错误的算法，浪费了很多时间和精力，提出一个算法的论证也不是很严谨，比较随意。二是一些经典题的套路不够熟练，I 题没有找到好的转化题目的方法，结果最后得出了一个非常复杂的做法，没有写得出来。

***

### 解题报告

#### A. String

**情况**　通过

**题意**　给一个 `01` 串，要求将其分为几个部分，满足每个部分的子串都是自己的最小表示法，并且要求分开的位置最少。

**题解**　暴力枚举每个子串是否是自己的最小表示法，然后 DP 即可。

<hr />
#### B. Irreducible Polynomial

**情况**　通过

**题意**　给定一个 $n$ 次整系数多项式，问其能否在实数域下进行因式分解。$n \leqslant 20$。

**题解**　对于实系数多项式，复数根一定是共轭出现的，所以当 $n > 2$ 时如果没有实数根则必有一对共轭的复数根，此时可以分解出一个次数为 $2$ 的实系数多项式。当 $n = 2$ 时使用判别式。$n < 2$ 时不可分。

<hr />
#### C. Governing Sand

**情况**　通过

**题意**　有很多种树，每棵树有高度和砍掉的代价，每种树有 $p_i$ 棵，现在要砍掉一些树使得高度是剩下树高中最大值的树的棵树大于一半，求最小代价。

**题解**　枚举最高的树高，把更高的砍掉，剩下的树用一个优先队列求出砍到目标数量的最小代价。

<hr />
#### D. Number

**情况**　通过

**题意**　给两个数 $n,\ p$ 输出一个数字恰好有 $n$ 位并且是 $p$ 的倍数或判断无解。

**题解**　输出字符串 $p$ 后面跟上若干个 $0$ 就是合法解。

<hr />
#### E. Find the Median

**情况**　通过

**题意**　有一个可重集合，每次把 $[l_i,\ r_i]$ 区间中每个数字插入到集合一次，每次插入之后输出集合的中位数。

**题解**　把区间离散化，线段树维护每个点上面有多少个数字，在线段树上面二分。

<hr />
#### F. Energy Stones

**情况**　通过

**题意**　有 $n$ 块石头排成一行，每块石头有初始能量，每秒增长的能量，和容量的最大值，每秒增长一定容量，如果超过最大值，就会变成最大值。在一些时刻，会收集一个区间的石头的能量，收集之后，石头当前能量变成 $0$。求最后总共收集了多少能量。

**题解**　把一次收集变成左端点和右端点两次操作，分别考虑每个石头被收集的次数，把收集的间隔段维护线段树，小于恢复慢的统计时间和，大于的统计个数和

<hr />
#### G. Make Shan Happy

**情况**　补题通过

**题意**　给一棵带权值的树，每次查询 $(x,\ k)$ 要找到编号最大的 $y$ 满足 $y-k\leqslant W[\mathrm{lca}(x,\ y)]$。

**题解**　考虑树剖求 LCA，每个点先预处理跳重链，然后丢到这个点的 `vector` 里面，维护一个排好序的 `value` 和 `key` 的数组，查的时候就是向上跳，可以是自己的子树，或者重链父亲直到 `top` 上的其他子树，或者刚到重链上面除了自己这个子树的其他子树，三个 log，可以离线变成两个，也可以在线两个 log。

<hr />
#### H. Pair

**情况**　通过

**题意**　给定 $A$、$B$、$C$，求有多少对 $x$、$y$ 满足 $1 \leqslant x \leqslant A$，$1 \leqslant y \leqslant B$ 以及至少满足下列条件之一：

* $x \operatorname{and} y > C$
* $x \operatorname{xor} y < C$

$1 \leqslant A,\ B,\ C \leqslant 10^9$

**题解**　首先计数后面两个条件不合法的个数，这样至少满足变为均不满足，然后使用数位 DP 即可。

<hr />
#### I. Chessboard

**情况**　补题通过

**题意**　给定 $n$ 和 $m$，问有多少个填了数字的方阵，满足每个元素不小于 $m$，并且从方阵中任意抽取一个排列矩阵上的元素求和为常数，且不超过 $n$。$n,\ m \leqslant 2000$。

**题解**　首先考虑数字下限的限制，我们可以先枚举方阵的边长 $k$，然后将方阵中每个数字减去 $m$，这样数字就只用是满足非负的条件即可，此时和的上界需要减去 $km$。考虑后面那个奇怪的条件，注意到求和对于每一行和每一列均只有一次，因此可以想象成方阵是由一行 $a_i$ 和一列 $b_i$ 两个数列生成的，其中第 $i$ 行第 $j$ 列的元素为 $b_i + a_j$，这样抽出来的和实际上就是 $\sum(a_i+b_i)$。由于元素非负即 $b_i + a_j \geqslant 0$ 这个条件不太好考虑，我们考虑将条件放成 $a_i$ 和 $b_i$ 均非负，这样可以比较容易用插板法求出。然后考虑算重的方案：只有所有 $a_i$ 都减 $1$，$b_i$ 都加 $1$ 时才会算重，因此再用插板法即可。时间复杂度 $\mathrm O(n^2)$。

<hr />
#### J. A+B problem

**情况**　通过

**题意**　$f(A)$ 表示 $A$ 反转后得到的数，求 $f(f(A)+f(B))$。

**题解**　按题意写 $f$ 函数，模拟即可。

<hr />
#### K. Function

**情况**　补题通过

**题意**　给一个积性函数，求前缀和，积性函数满足：
$$
f(p^e) = 
\begin{cases}
3e+1 & (p\text{ 可以被表示为 }p=a^2+b^2) \\
1 & (\text{其他情况})
\end{cases}
$$

**题解**　这样的 $p$ 恰好是所有 $p=4k+1$ 型质数，用 min-25 筛求出所有 $4k+1$ 型质数就是 $f(x)$ 在质数的点值，之后再用 min-25 筛算出合数这样的 $p$ 恰好是所有 $p=4k+1$型质数，用 min-25 筛求出所有 $4k+1$ 型质数就是 $f(x)$ 在质数的点值，之后再用 min-25 筛算出合数点值即可。